{% if section.settings.disable_top_bar == false %}
<div class="ug-top-bar-announcement{% if section.settings.disable_top_bar_mobile %} ug-top-bar--hide-mobile{% endif %}">{% render 'ug-announcement-bar', section: section %}</div>
{% if section.settings.show_currency_selector or section.settings.show_locale_selector %}
<section class="ug-top-bar color-{{ section.settings.color_scheme }} ug-top-bar--{{ section.settings.top_bar_alignment }}{% if section.settings.disable_top_bar_mobile %} ug-top-bar--hide-mobile{% endif %}" aria-label="Top bar">
  <div class="page-width">
    <div class="ug-top-bar__inner">
      {% if section.settings.show_currency_selector and localization.available_countries.size > 1 %}
        <div class="ug-top-bar__localization">
          {% form 'localization', id: 'TopBarCountryForm' %}
            <label for="TopBarCountry" class="visually-hidden">{{ 'localization.country_label' | t }}</label>
            <select id="TopBarCountry" name="country_code" class="ug-top-bar__select">
              {% for country in localization.available_countries %}
                <option value="{{ country.iso_code }}" {% if country.iso_code == localization.country.iso_code %}selected{% endif %}>{{ country.name }} ({{ country.currency.iso_code }})</option>
              {% endfor %}
            </select>
            <button type="submit">{{ 'localization.update_country' | t }}</button>
          {% endform %}
        </div>
      {% endif %}
      {% if section.settings.show_locale_selector and localization.available_languages.size > 1 %}
        <div class="ug-top-bar__localization">
          {% form 'localization', id: 'TopBarLanguageForm' %}
            <label for="TopBarLanguage" class="visually-hidden">{{ 'localization.language_label' | t }}</label>
            <select id="TopBarLanguage" name="locale_code" class="ug-top-bar__select">
              {% for language in localization.available_languages %}
                <option value="{{ language.iso_code }}" {% if language.iso_code == localization.language.iso_code %}selected{% endif %}>{{ language.endonym_name }}</option>
              {% endfor %}
            </select>
            <button type="submit">{{ 'localization.update_language' | t }}</button>
          {% endform %}
        </div>
      {% endif %}
    </div>
  </div>
</section>
{% endif %}
{% endif %}

{% schema %}
{
  "name": "Top bar",
  "settings": [
    { "type": "header", "content": "Visibility" },
    { "type": "checkbox", "id": "disable_top_bar", "default": false, "label": "Disable top bar" },
    { "type": "checkbox", "id": "disable_top_bar_mobile", "default": false, "label": "Hide top bar on mobile" },
    { "type": "select", "id": "top_bar_alignment", "options": [
      { "value": "default", "label": "Default" },
      { "value": "center", "label": "Center" }
    ], "default": "default", "label": "Top bar alignment" },
    { "type": "header", "content": "Announcement" },
    { "type": "text", "id": "message", "label": "Announcement message", "default": "Free shipping on orders over $50" },
    { "type": "url", "id": "link", "label": "Link" },
    { "type": "text", "id": "link_text", "label": "Link text" },
    { "type": "header", "content": "Localization" },
    { "type": "checkbox", "id": "show_currency_selector", "default": false, "label": "Show country/currency selector" },
    { "type": "checkbox", "id": "show_locale_selector", "default": false, "label": "Show language selector" },
    { "type": "select", "id": "color_scheme", "options": [
      { "value": "background-1", "label": "Background 1" },
      { "value": "background-2", "label": "Background 2" },
      { "value": "accent", "label": "Accent" }
    ], "default": "background-2", "label": "Color scheme" }
  ]
}
{% endschema %}

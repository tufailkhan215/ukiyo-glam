{% comment %} Footer â€“ mirror source footer (banner, blocks, address, copyright_content, bottom menu, accordion) {% endcomment %}
{%- style -%}
  .ug-footer { margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px; }
  .section-{{ section.id }}-padding { padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px; padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px; }
  @media (min-width: 750px) {
    .ug-footer { margin-top: {{ section.settings.margin_top }}px; }
    .section-{{ section.id }}-padding { padding-top: {{ section.settings.padding_top }}px; padding-bottom: {{ section.settings.padding_bottom }}px; }
  }
  {% unless section.settings.enable_accordion %}
  .ug-footer__block-content { display: block !important; }
  {% endunless %}
{%- endstyle -%}

<footer class="ug-footer color-{{ section.settings.color_scheme }} section-{{ section.id }}-padding {% if section.settings.footer_default %}ug-footer--default-style{% endif %}" role="contentinfo">
  {% if section.settings.image != blank %}
    <div class="ug-footer__banner">
      <img src="{{ section.settings.image | image_url: width: 1500 }}" alt="" width="1500" loading="lazy">
    </div>
  {% endif %}

  {% if section.blocks.size > 0 or section.settings.show_social %}
    <div class="ug-footer__content-top {% if section.settings.page_full_width %}ug-footer--full-width{% endif %} {% if section.settings.page_full_width_spacing %}ug-footer--full-width-spacing{% endif %}">
      <div class="page-width">
        <div class="ug-footer__grid {% if section.settings.border_right %}ug-footer__grid--border-right{% endif %}">
          {% for block in section.blocks %}
            <div class="ug-footer__block ug-footer__block--{{ block.settings.alignment }} {% if block.type == 'address' %}ug-footer__block--address{% endif %}" {{ block.shopify_attributes }}>
              {% if block.settings.heading != blank %}
                <h3 class="ug-footer__heading {% if section.settings.enable_accordion %}ug-footer__heading--accordion{% endif %}" {% if section.settings.enable_accordion %}data-ug-footer-toggle aria-expanded="true"{% endif %}>{{ block.settings.heading }}</h3>
              {% endif %}
              <div class="ug-footer__block-content">
                {% case block.type %}
                  {% when 'link_list' %}
                    {% if block.settings.menu != blank %}
                      <ul class="ug-footer__links {% unless block.settings.list_style == 'vertical' %}ug-footer__links--inline{% endunless %}">
                        {% for link in block.settings.menu.links %}
                          <li><a href="{{ link.url }}">{{ link.title }}</a></li>
                        {% endfor %}
                      </ul>
                    {% endif %}

                  {% when 'text' %}
                    <div class="ug-footer__text-block">
                      {% if block.settings.image != blank %}
                        <a href="{{ routes.root_url }}" class="ug-footer__logo">
                          <img src="{{ block.settings.image | image_url: width: block.settings.logo_width | times: 2 }}" alt="{{ shop.name }}" width="{{ block.settings.logo_width }}" loading="lazy" style="max-width: min(100%, {{ block.settings.logo_width }}px);">
                        </a>
                      {% endif %}
                      <div class="ug-footer__text rte {{ block.settings.alignment }}">{{ block.settings.subtext }}</div>
                    </div>

                  {% when 'address' %}
                    <div class="ug-footer__address {{ block.settings.alignment }}">
                      {% if block.settings.image != blank %}
                        <a href="{{ routes.root_url }}" class="ug-footer__logo">
                          <img src="{{ block.settings.image | image_url: width: block.settings.logo_width | times: 2 }}" alt="{{ shop.name }}" width="{{ block.settings.logo_width }}" loading="lazy" style="max-width: min(100%, {{ block.settings.logo_width }}px);">
                        </a>
                      {% endif %}
                      {% if block.settings.address_heading != blank %}<h4 class="ug-footer__subheading">{{ block.settings.address_heading }}</h4>{% endif %}
                      <ul class="ug-footer__contact list-unstyled">
                        {% if block.settings.footer_address != blank %}
                          <li>{% render 'ug-icon-location' %}<address>{{ block.settings.footer_address }}</address></li>
                        {% endif %}
                        {% if block.settings.footer_contact_id != blank %}
                          <li><a href="mailto:{{ block.settings.footer_contact_id }}">{% render 'ug-icon-mail' %}<span>{{ block.settings.footer_contact_id }}</span></a></li>
                        {% endif %}
                        {% if block.settings.footer_contact_no != blank %}
                          <li><a href="tel:{{ block.settings.footer_contact_no }}">{% render 'ug-icon-phone' %}<span>{{ block.settings.footer_contact_no }}</span></a></li>
                        {% endif %}
                        {% if block.settings.office_hours != blank %}
                          <li><span class="ug-footer__hours">{{ block.settings.office_hours }}</span></li>
                        {% endif %}
                      </ul>
                    </div>

                  {% when 'newsletter' %}
                    <div class="ug-footer__newsletter-block {{ block.settings.alignment }}">
                      {% if block.settings.newsletter_subtext != blank %}<div class="ug-footer__newsletter-subtext rte">{{ block.settings.newsletter_subtext }}</div>{% endif %}
                      {% form 'customer', class: 'ug-footer__newsletter' %}
                        <input type="hidden" name="contact[tags]" value="newsletter">
                        <div class="ug-footer__newsletter-inner">
                          <input type="email" name="contact[email]" placeholder="{{ 'newsletter.label' | t }}" required aria-label="{{ 'newsletter.label' | t }}" value="{{ form.email }}">
                          <button type="submit" class="ug-btn {% if block.settings.button_style == 'icon' %}ug-btn--icon{% else %}ug-btn--primary{% endif %}">{{ 'newsletter.button_label' | t }}</button>
                        </div>
                        {% if form.posted_successfully? %}<p class="ug-footer__newsletter-success">{{ 'newsletter.success' | t }}</p>{% endif %}
                      {% endform %}
                    </div>
                {% endcase %}
              </div>
            </div>
          {% endfor %}
        </div>
        {% if section.settings.show_social %}
          <div class="ug-footer__social">{% render 'ug-social-icons', class: 'ug-footer__social-list' %}</div>
        {% endif %}
      </div>
    </div>
  {% endif %}

  <div class="ug-footer__bottom">
    <div class="page-width ug-footer__bottom-inner">
      <div class="ug-footer__copyright-wrap">
        {% if section.settings.copyright_content != blank %}
          <div class="ug-footer__copyright rte">{{ section.settings.copyright_content }}</div>
        {% else %}
          <p class="ug-footer__copyright">&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. {{ 'sections.footer.theme_by' | t }}. {{ 'sections.footer.powered_by' | t }} Shopify.</p>
        {% endif %}
      </div>
      {% if section.settings.payment_enable and shop.enabled_payment_types.size > 0 %}
        <div class="ug-footer__payment">
          {% for type in shop.enabled_payment_types %}{{ type | payment_type_svg_tag: class: 'ug-footer__payment-icon' }}{% endfor %}
        </div>
      {% endif %}
      {% if section.settings.menu != blank %}
        <ul class="ug-footer__bottom-menu {% unless section.settings.bottom_menu_style == 'vertical' %}ug-footer__bottom-menu--inline{% endunless %}">
          {% for link in linklists[section.settings.menu].links %}
            <li><a href="{{ link.url }}">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "blocks": [
    {
      "type": "link_list",
      "name": "Menu",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Quick links" },
        { "type": "link_list", "id": "menu", "label": "Menu", "default": "footer" },
        { "type": "select", "id": "alignment", "label": "Alignment", "options": [{"value": "left", "label": "Left"}, {"value": "center", "label": "Center"}, {"value": "right", "label": "Right"}], "default": "left" },
        { "type": "select", "id": "list_style", "label": "List style", "options": [{"value": "vertical", "label": "Vertical"}, {"value": "horizontal", "label": "Horizontal"}], "default": "vertical" }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Logo / image" },
        { "type": "range", "id": "logo_width", "min": 50, "max": 300, "step": 10, "default": 150, "unit": "px", "label": "Logo width" },
        { "type": "text", "id": "heading", "label": "Heading" },
        { "type": "richtext", "id": "subtext", "label": "Subtext" },
        { "type": "richtext", "id": "text", "label": "Text (fallback)" },
        { "type": "select", "id": "alignment", "label": "Alignment", "options": [{"value": "left", "label": "Left"}, {"value": "center", "label": "Center"}, {"value": "right", "label": "Right"}], "default": "left" }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter",
      "settings": [
        { "type": "text", "id": "heading", "label": "Heading", "default": "Subscribe" },
        { "type": "richtext", "id": "newsletter_subtext", "label": "Subtext" },
        { "type": "select", "id": "alignment", "label": "Alignment", "options": [{"value": "left", "label": "Left"}, {"value": "center", "label": "Center"}, {"value": "right", "label": "Right"}], "default": "left" },
        { "type": "select", "id": "button_style", "label": "Button style", "options": [{"value": "button", "label": "Button"}, {"value": "icon", "label": "Icon"}], "default": "button" }
      ]
    },
    {
      "type": "address",
      "name": "Address / contact",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Logo" },
        { "type": "range", "id": "logo_width", "min": 50, "max": 300, "step": 10, "default": 150, "unit": "px", "label": "Logo width" },
        { "type": "text", "id": "address_heading", "label": "Heading" },
        { "type": "textarea", "id": "footer_address", "label": "Address" },
        { "type": "text", "id": "footer_contact_no", "label": "Phone" },
        { "type": "text", "id": "footer_contact_id", "label": "Email" },
        { "type": "text", "id": "office_hours", "label": "Office hours" },
        { "type": "select", "id": "alignment", "label": "Alignment", "options": [{"value": "left", "label": "Left"}, {"value": "center", "label": "Center"}, {"value": "right", "label": "Right"}], "default": "left" }
      ]
    }
  ],
  "settings": [
    { "type": "header", "content": "Layout" },
    { "type": "checkbox", "id": "page_full_width", "default": false, "label": "Full width" },
    { "type": "checkbox", "id": "page_full_width_spacing", "default": false, "label": "Full width spacing" },
    { "type": "select", "id": "color_scheme", "options": [{"value": "background-1", "label": "Background 1"}, {"value": "background-2", "label": "Background 2"}, {"value": "accent", "label": "Accent"}], "default": "background-2", "label": "Color scheme" },
    { "type": "image_picker", "id": "image", "label": "Banner image (top)" },
    { "type": "header", "content": "Content" },
    { "type": "checkbox", "id": "show_social", "default": false, "label": "Show social icons" },
    { "type": "richtext", "id": "copyright_content", "label": "Copyright (overrides default text)" },
    { "type": "link_list", "id": "menu", "label": "Bottom menu" },
    { "type": "select", "id": "bottom_menu_style", "label": "Bottom menu style", "options": [{"value": "horizontal", "label": "Horizontal"}, {"value": "vertical", "label": "Vertical"}], "default": "horizontal" },
    { "type": "header", "content": "Payment & style" },
    { "type": "checkbox", "id": "payment_enable", "default": true, "label": "Show payment icons" },
    { "type": "checkbox", "id": "footer_default", "default": false, "label": "Default footer style" },
    { "type": "checkbox", "id": "border_right", "default": false, "label": "Border between blocks" },
    { "type": "range", "id": "margin_top", "min": 0, "max": 100, "step": 4, "default": 0, "unit": "px", "label": "Margin top" },
    { "type": "checkbox", "id": "enable_accordion", "default": false, "label": "Accordion on mobile" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "default": 48, "unit": "px", "label": "Padding top" },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "default": 36, "unit": "px", "label": "Padding bottom" }
  ],
  "default": {
    "blocks": [
      { "type": "link_list", "settings": { "heading": "Shop", "alignment": "left", "list_style": "vertical" } },
      { "type": "link_list", "settings": { "heading": "Help", "alignment": "left", "list_style": "vertical" } },
      { "type": "newsletter", "settings": { "heading": "Newsletter", "alignment": "left", "button_style": "button" } }
    ]
  }
}
{% endschema %}

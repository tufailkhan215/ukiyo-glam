<section class="ug-testimonials ug-section-animate section-{{ section.id }}-padding">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      {% render 'ug-section-heading', heading: section.settings.heading, subheading: section.settings.subheading, alignment: 'center' %}
    {% endif %}
    <div class="ug-testimonials__slider" data-testimonials-slider>
      <div class="ug-testimonials__track">
        {% for block in section.blocks %}
          {% if block.type == 'testimonial' %}
            <div class="ug-testimonials__slide" {{ block.shopify_attributes }}>
              {% if block.settings.image != blank %}
                <div class="ug-testimonials__image">
                  <img src="{{ block.settings.image | image_url: width: 120 }}" alt="{{ block.settings.author | escape }}" width="120" height="120" loading="lazy">
                </div>
              {% endif %}
              <blockquote class="ug-testimonials__quote">{{ block.settings.quote }}</blockquote>
              {% if block.settings.author != blank %}<cite class="ug-testimonials__author">â€” {{ block.settings.author }}</cite>{% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {% if section.blocks.size > 1 %}
        <button type="button" class="ug-testimonials__prev" data-testimonials-prev aria-label="Previous">{% render 'ug-icon-left-arrow' %}</button>
        <button type="button" class="ug-testimonials__next" data-testimonials-next aria-label="Next">{% render 'ug-icon-right-arrow' %}</button>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Testimonials",
  "max_blocks": 10,
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading" },
    { "type": "text", "id": "subheading", "label": "Subheading" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "default": 36, "unit": "px", "label": "Padding top" },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "default": 36, "unit": "px", "label": "Padding bottom" }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "textarea", "id": "quote", "label": "Quote" },
        { "type": "text", "id": "author", "label": "Author" }
      ]
    }
  ],
  "presets": [{ "name": "Testimonials" }]
}
{% endschema %}

<section class="ug-featured-blog section-{{ section.id }}-padding">
  <div class="page-width">
    {% if section.settings.blog != blank %}
      {% if section.settings.heading != blank %}
        {% render 'ug-section-heading', heading: section.settings.heading, subheading: section.settings.subheading, alignment: 'center' %}
      {% endif %}
      <div class="ug-featured-blog__grid">
        {% for article in section.settings.blog.articles limit: section.settings.posts_to_show %}
          <article class="ug-featured-blog__card">
            <a href="{{ article.url }}">
              {% if article.image %}
                <div class="ug-featured-blog__media">
                  <img src="{{ article.image | image_url: width: 500 }}" alt="{{ article.title | escape }}" width="500" loading="lazy">
                </div>
              {% endif %}
              <div class="ug-featured-blog__info">
                <h3 class="ug-featured-blog__title">{{ article.title }}</h3>
                <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}">{{ article.published_at | date: format: 'date' }}</time>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>
      {% if section.settings.show_view_all %}
        <a href="{{ section.settings.blog.url }}" class="ug-btn ug-btn--secondary ug-featured-blog__view-all">{{ 'collections.general.view_all' | t }}</a>
      {% endif %}
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured blog",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading" },
    { "type": "text", "id": "subheading", "label": "Subheading" },
    { "type": "blog", "id": "blog", "label": "Blog" },
    { "type": "range", "id": "posts_to_show", "min": 2, "max": 6, "step": 1, "default": 3, "label": "Posts to show" },
    { "type": "checkbox", "id": "show_view_all", "default": true, "label": "Show view all" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "default": 36, "unit": "px", "label": "Padding top" },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "default": 36, "unit": "px", "label": "Padding bottom" }
  ],
  "presets": [{ "name": "Featured blog" }]
}
{% endschema %}
